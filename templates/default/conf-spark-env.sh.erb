#!/usr/bin/env bash

# This file contains environment variables required to run Spark. Copy it as
# spark-env.sh and edit that to configure Spark for your site.
#
# The following variables can be set in this file:
# - SPARK_LOCAL_IP, to set the IP address Spark binds to on this node
# - MESOS_NATIVE_LIBRARY, to point to your libmesos.so if you use Mesos
# - SPARK_JAVA_OPTS, to set node-specific JVM options for Spark. Note that
#   we recommend setting app-wide options in the application's driver program.
#     Examples of node-specific options : -Dspark.local.dir, GC options
#     Examples of app-wide options : -Dspark.serializer
#
# If using the standalone deploy mode, you can also set variables for it here:
# - SPARK_MASTER_IP, to bind the master to a different IP address or hostname
# - SPARK_MASTER_PORT / SPARK_MASTER_WEBUI_PORT, to use non-default ports
# - SPARK_WORKER_CORES, to set the number of cores to use on this machine
# - SPARK_WORKER_MEMORY, to set how much memory to use (e.g. 1000m, 2g)
# - SPARK_WORKER_PORT / SPARK_WORKER_WEBUI_PORT
# - SPARK_WORKER_INSTANCES, to set the number of worker processes per node
# - SPARK_WORKER_DIR, to set the working directory of worker processes

<% if @spark_mem %>
SPARK_MEM=<%= @spark_mem %>
<% end %>
<% if @local_ip %>
SPARK_LOCAL_IP=<%= @local_ip %>
<% end %>
<% if @mesos_native_library %>
MESOS_NATIVE_LIBRARY=<%= @mesos_native_library %>
<% end %>

<% if @master_ip %>
SPARK_MASTER_IP=<%= @master_ip %>
<% end %>
<% if @master_port %>
SPARK_MASTER_PORT=<%= @master_port %>
<% end %>
<% if @worker_cores %>
SPARK_WORKER_CORES=<%= @worker_cores %>
<% end %>
<% if @worker_memory %>
SPARK_WORKER_MEMORY=<%= @worker_memory %>
<% end %>
<% if @worker_port %>
SPARK_WORKER_PORT=<%= @worker_port %>
<% end %>
<% if @worker_instances %>
SPARK_WORKER_INSTANCES=<%= @worker_instances %>
<% end %>
<% if @worker_dir %>
SPARK_WORKER_DIR=<%= @worker_dir %>
<% end %>

<% if @spark_classpath %>
SPARK_CLASSPATH=<%= @spark_classpath %>
<% end %>
<% if !@java_opts.nil? && !@java_opts.empty? %>
SPARK_JAVA_OPTS=<%= @java_opts %>
<% end %>

